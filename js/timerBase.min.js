export class TimerBase{constructor({tick:tick,ended:ended}){this.tick=tick,this.ended=ended,this.storageKey="ugc_academy_timer_data",this.durationDays=3,this.updateTimerValues=this.updateTimerValues.bind(this),this.cleanup=this.cleanup.bind(this),this.pluralizeDays=this.pluralizeDays.bind(this);const savedData=localStorage.getItem(this.storageKey);if(savedData){const{endTime:endTime}=JSON.parse(savedData);this.timeLeft=endTime-Date.now()}else{const endTime=Date.now()+24*this.durationDays*60*60*1e3;this.timeLeft=endTime-Date.now(),localStorage.setItem(this.storageKey,JSON.stringify({endTime:endTime}))}this.interval=null,this.timerValues={seconds:0,minutes:0,hours:0,days:0}}pluralizeDays(count){return count?1===count?"día":"días":""}updateTimerValues(timeLeft){const seconds=Math.floor(timeLeft/1e3%60),minutes=Math.floor(timeLeft/6e4%60),hours=Math.floor(timeLeft/36e5%24),days=Math.floor(timeLeft/864e5);this.timerValues={seconds:seconds,minutes:minutes,hours:hours,days:days}}init(){this.timeLeft<=0?this.cleanup():(this.updateTimerValues(this.timeLeft),this.interval=setInterval(()=>{this.timeLeft-=1e3,this.timeLeft<=0?this.cleanup():(this.updateTimerValues(this.timeLeft),this.tick(this.timer))},1e3))}cleanup(){this.interval&&(clearInterval(this.interval),this.interval=null),localStorage.removeItem(this.storageKey),"function"==typeof this.ended&&this.ended()}destroy(){this.cleanup()}get timer(){const{days:days,hours:hours,minutes:minutes,seconds:seconds}=this.timerValues;return{days:days,daysWord:this.pluralizeDays(days),hours:hours>=10?hours:`0${hours}`,minutes:minutes>=10?minutes:`0${minutes}`,seconds:seconds>=10?seconds:`0${seconds}`}}}