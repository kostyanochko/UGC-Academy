document.querySelectorAll(".ui-spoiler").forEach(spoiler=>{const summary=spoiler.querySelector("summary"),contentWrapper=spoiler.querySelector(".ui-spoiler__content-wrapper");summary&&contentWrapper&&(spoiler.style.height=`${summary.offsetHeight}px`,summary.addEventListener("click",async e=>{if(e.preventDefault(),spoiler.open)spoiler.classList.add("closing"),contentWrapper.style.maxHeight="0",contentWrapper.style.opacity="0",await new Promise(r=>setTimeout(r,300)),spoiler.style.height=`${summary.offsetHeight}px`,spoiler.removeAttribute("open"),spoiler.classList.remove("closing");else{spoiler.setAttribute("open","");const contentHeight=contentWrapper.scrollHeight;spoiler.style.height=`${summary.offsetHeight+contentHeight}px`,contentWrapper.style.maxHeight=`${contentHeight}px`,contentWrapper.style.opacity="1",await new Promise(r=>setTimeout(r,500))}}))});